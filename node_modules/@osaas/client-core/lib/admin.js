"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.removeSubscription = exports.listSubscriptions = void 0;
const fetch_1 = require("./fetch");
async function listSubscriptions(context) {
    const serviceUrl = new URL(`https://catalog.svc.${context.getEnvironment()}.osaas.io/mysubscriptions`);
    return await (0, fetch_1.createFetch)(serviceUrl, {
        method: 'GET',
        headers: {
            'x-pat-jwt': `Bearer ${context.getPersonalAccessToken()}`,
            'Content-Type': 'application/json'
        }
    });
}
exports.listSubscriptions = listSubscriptions;
async function removeSubscription(context, serviceId) {
    const serviceUrl = new URL(`https://catalog.svc.${context.getEnvironment()}.osaas.io/mysubscriptions/${serviceId}`);
    await (0, fetch_1.createFetch)(serviceUrl, {
        method: 'DELETE',
        body: JSON.stringify({ services: [serviceId] }),
        headers: {
            'x-pat-jwt': `Bearer ${context.getPersonalAccessToken()}`,
            'Content-Type': 'application/json'
        }
    });
}
exports.removeSubscription = removeSubscription;
//# sourceMappingURL=admin.js.map